import React, { useState, useEffect } from "react";
import { Link, useLocation } from "react-router-dom";
import Cookies from "js-cookie";
import "../assets/shadow_blur.css";

const Footer = (props) => {
  const [userMenu, setUserMenu] = useState(false);
  const [mobileMenu, setMobileMenu] = useState(false);

  const location = useLocation();
  const [userToken, setUserToken] = useState();

  useEffect(() => {
    if (
      Cookies.get("userToken") &&
      (location.pathname === "/logout" ||
        location.pathname === "/delete_account")
    ) {
      Cookies.remove("userToken");
    }
  }, [location.pathname]);

  useEffect(() => {
    setUserToken(Cookies.get("userToken"));
  }, [location.pathname, location]);

  if (!userToken) {
    return <></>;
  }

  return (
    <footer className="sb">
      <div className="flex flex-row items-center justify-center">
        <Link
          to="/"
          className={`${location.pathname === "/" ? "bg-[#79b859]" : ""} p-4`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            stroke={`${location.pathname === "/" ? "#ffffff" : "#79B859"}`}
            strokeWidth="1.25"
            className="w-10 h-10"
            aria-hidden="true"
            data-slot="icon"
            viewBox="0 0 24 24"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205 3 1m1.5.5-1.5-.5M6.75 7.364V3h-3v18m3-13.636 10.5-3.819"
            />
          </svg>
        </Link>
        <Link
          to="/stats"
          className={`${
            location.pathname === "/stats" ? "bg-[#79B859]" : ""
          } p-4`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            stroke={`${location.pathname === "/stats" ? "#ffffff" : "#79B859"}`}
            className="w-10 h-10"
            strokeWidth="1.25"
            aria-hidden="true"
            data-slot="icon"
            viewBox="0 0 24 24"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              d="M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"
            />
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              d="M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"
            />
          </svg>
        </Link>
        <Link
          to="/flower"
          className={`${
            location.pathname === "/flower" ? "bg-[#79B859]" : ""
          } p-4`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            className="h-10 w-10"
            stroke={`${location.pathname === "/flower" ? "#ffffff" : "#79B859"}`}
            viewBox="0 0 284.933 284.933"
          >
            <path d="M277.651 133.196c-.974-1.24-10.02-12.337-27.357-20.004-7.234-3.199-16.642-6.08-28.046-6.967 4.019-9.175 3.801-16.8 3.314-20.502-1.834-13.929-12.424-24.519-26.352-26.353-3.595-.472-10.884-.693-19.7 2.97a74.612 74.612 0 0 0-7.05-21.999c-8.289-16.463-20.149-24.957-21.474-25.872l-8.521-5.88-8.521 5.881c-1.325.914-13.184 9.409-21.473 25.871a74.59 74.59 0 0 0-7.051 22.003c-8.816-3.663-16.106-3.443-19.699-2.973-13.928 1.834-24.519 12.424-26.352 26.353-.488 3.701-.706 11.326 3.313 20.501-11.406.887-20.816 3.77-28.05 6.97-17.337 7.67-26.381 18.769-27.355 20.009L0 142.471l7.281 9.266c.974 1.24 10.02 12.337 27.357 20.004 7.233 3.199 16.643 6.079 28.046 6.966-4.02 9.176-3.801 16.801-3.313 20.502 1.833 13.929 12.424 24.519 26.352 26.353 1.073.141 2.474.26 4.147.26 3.933 0 9.367-.66 15.551-3.23a74.58 74.58 0 0 0 7.051 22c8.289 16.463 20.149 24.957 21.475 25.872l8.52 5.88 8.521-5.881c1.325-.914 13.184-9.409 21.473-25.871a74.61 74.61 0 0 0 7.05-22c6.185 2.57 11.62 3.23 15.552 3.23 1.673 0 3.075-.119 4.147-.26 13.928-1.834 24.518-12.424 26.352-26.353.487-3.702.705-11.327-3.314-20.502 11.405-.887 20.818-3.769 28.051-6.969 17.337-7.67 26.381-18.769 27.355-20.009l7.278-9.268-7.281-9.265zm-85.326-43.66c1.072-.35 1.893-.451 2.467-.451.48 0 .788.071.929.127.123.309.317 1.428-.324 3.396-.739 2.268-3.691 8.622-14.553 15.889a51.734 51.734 0 0 0-2.131-2.278 52.273 52.273 0 0 0-2.276-2.13c7.267-10.861 13.621-13.814 15.888-14.553zM157.5 157.5c-8.29 8.289-21.777 8.288-30.067.001-8.29-8.29-8.29-21.778 0-30.068 4.146-4.145 9.589-6.217 15.033-6.217s10.89 2.072 15.033 6.217c8.29 8.289 8.29 21.777.001 30.067zM138.737 54.923a45.543 45.543 0 0 1 3.729-6.478 45.481 45.481 0 0 1 3.198 5.387c5.573 11.068 6.27 23.712 2.15 37.683a51.71 51.71 0 0 0-10.7 0c-3.981-13.508-3.458-25.785 1.623-36.592zM89.212 89.211c.306-.123 1.429-.317 3.395.324 2.268.739 8.622 3.693 15.889 14.554a51.07 51.07 0 0 0-2.276 2.13 51.712 51.712 0 0 0-2.131 2.277c-10.863-7.268-13.815-13.621-14.554-15.89-.64-1.967-.447-3.086-.323-3.395zm-46.205 53.255c9.929-5.317 25.961-9.718 48.341-3.305a51.683 51.683 0 0 0 0 6.609c-22.381 6.412-38.412 2.013-48.341-3.304zm49.599 52.931c-1.967.643-3.087.447-3.395.324-.124-.309-.317-1.428.323-3.396.739-2.268 3.691-8.622 14.554-15.89.686.774 1.39 1.537 2.131 2.277.74.74 1.503 1.444 2.276 2.13-7.266 10.862-13.62 13.816-15.889 14.555zm53.589 34.612a45.653 45.653 0 0 1-3.729 6.479 45.461 45.461 0 0 1-3.729-6.479c-5.083-10.807-5.605-23.083-1.623-36.593 1.779.185 3.565.286 5.352.286s3.573-.101 5.352-.286c3.982 13.51 3.459 25.786-1.623 36.593zm49.526-34.288c-.309.122-1.426.318-3.396-.324-2.268-.739-8.622-3.693-15.889-14.553a51.07 51.07 0 0 0 2.276-2.13l.001-.001c.74-.74 1.444-1.503 2.13-2.277 10.862 7.267 13.814 13.621 14.553 15.889.642 1.968.448 3.088.325 3.396zm-2.138-49.95a51.683 51.683 0 0 0 0-6.609c22.381-6.414 38.412-2.014 48.343 3.304-9.929 5.317-25.961 9.719-48.343 3.305z" />
          </svg>
        </Link>
        <Link
          to="/air-quality"
          className={`${
            location.pathname === "/air-quality" ? "bg-[#79B859]" : ""
          } p-4`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 -3 20 20"
            stroke={`${
              location.pathname === "/air-quality" ? "#ffffff" : "#79B859"
            }`}
            className="w-10 h-10"
          >
            <g
              fill="none"
              stroke={`${
                location.pathname === "/air-quality" ? "#ffffff" : "#79B859"
              }`}
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth="1.25"
            >
              <path d="M17 1a2 2 0 0 1 0 4h-6" />
              <path
                d="M14 13a2 2 0 0 0 0-4H4m3-8h4M1 5h6"
                data-name="primary"
              />
            </g>
          </svg>
        </Link>
        <Link
          to="/forum"
          className={`${
            location.pathname === "/forum" ? "bg-[#79B859]" : ""
          } p-4`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            stroke={`${location.pathname === "/forum" ? "#ffffff" : "#79B859"}`}
            className="w-10 h-10"
            strokeWidth="1.25"
            aria-hidden="true"
            data-slot="icon"
            viewBox="0 0 24 24"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3a49.5 49.5 0 0 1-4.02-.163 2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"
            />
          </svg>
        </Link>
      </div>
    </footer>
  );
};

export default Footer;
